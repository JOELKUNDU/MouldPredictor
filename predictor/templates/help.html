{% extends 'base.html' %}
{% block title %}
Help Page
{% endblock %}
{% block content %}
<div class="page-body dark2 para-text">

<h1 id="moulding-machine-parameter-predictor">Moulding Machine Parameter Predictor</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#installation">Installation</a>
<ul>
<li><a href="#to-run-as-a-desktop-app">As a Desktop App</a></li>
<li><a href="#to-run-as-a-web-app">As a Web App</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#login-and-register">Login and Register</a></li>
<li><a href="#finding-optimal-machine-parameters-parameters">Finding optimal machine parameters parameters</a></li>
<li><a href="#managing-the-database">Managing the database</a>
<ul>
<li><a href="#adding-a-single-new-entry-to-the-database">Adding a single new entry to the database</a></li>
<li><a href="#adding-data-entries-from-a-csv-file">Adding data entries from a csv file</a></li>
<li><a href="#deleting-one-entry-from-the-database">Deleting one entry from the database</a></li>
<li><a href="#deleting-the-entire-database">Deleting the entire database</a></li>
<li><a href="#export-entire-database-as-a-csv">Export entire database as a CSV</a></li>
<li><a href="#export-csv-format-to-add-data-to-the-database">Export CSV Format to add data to the database</a></li>
<li><a href="#add-an-entirely-new-dataset-to-the-databse">Add an entirely new dataset to the databse</a></li>
</ul>
</li>
<li><a href="#managing-the-artificial-neural-network">Managing the Artificial Neural Network</a>
<ul>
<li><a href="#understanding-the-performance-of-the-ann">Understanding the performance of the ANN</a></li>
<li><a href="#retrain-the-model">Retrain the model</a></li>
<li><a href="#hypertuning-the-model">HyperTuning the Model</a></li>
</ul>
</li>
<li><a href="#getting-help">Getting Help</a></li>
</ul>
</li>
<li><a href="#code-documentation">Code Documentation</a>
<ul>
<li><a href="#technology-documentation">Technology Documentation</a></li>
<li><a href="#python-script--database-.py">predictor/database.py</a></li>
<li><a href="#python-script-forms-.py">predictor/forms.py</a></li>
<li><a href="#python-script-machine_learning-.py">predictor/machine_learning.py</a></li>
<li><a href="#python-script-models-.py">predictor/model.py</a></li>
<li><a href="#python-script-routes-.py">predictor/routes.py</a></li>
<li><a href="#python-script--ui-.py">predictor/ui.py</a></li>
<li><a href="#python-script-__init__.py">predictor/__init__.py</a></li>
<li><a href="#python-script-run-.py">run.py</a></li>
<li><a href="#python-script-run-server-.py">run-server.py</a></li>
<li><a href="#python-script-man-recreatedb-.py">man-recreatedb.py</a></li>
<li><a href="#python-script-man-overfit-test-.py">man-overfit-test.py</a></li>
<li><a href="#python-script-man-hypertune-.py">man-hypertune,py</a></li>
<li><a href="#batch-script-get-dependencies-.bat">get-dependencies.bat</a></li>
<li><a href="#shell-script-get-dependencies-.sh">get-dependencies.sh</a></li>
<li><a href="#c-file-source.cpp">source.cpp</a></li>
</ul>
</li>
<li><a href="#author-and-license">Author and License</a></li>
<li><a href="#contact">Contact</a></li>
</ol>
<hr>
<h2 id="introduction">Introduction</h2>
<p>Injection moulding is the most popular and widely used manufacturing process for the mass production of plastic products. In the process, a polymer is melted by electric and frictional heat and is injected into a metal mould under high pressure. The quality of the part produced is greatly influenced by process conditions. These process conditions can be changed by changing the machine parameters and is usually done by an experienced engineer. Whenever a new mould is created an engineer will experimentally determine the optimal parameters via repeated trials and visual inspection of the created product. This method is necessary as there is no theoretical method to predict the quality of the part produced given a set of machine parameters. This makes the process highly dependant on the knowledge and experience of the engineer which makes it hard to transfer the skill to a new operator. Wastage in the form of defective products, machine downtime, labour and energy also happen due to the experimental method. Another alternative to the experimental method is simulations. However, simulations are slow and computationally expensive.</p>
<p>Machine learning is a subset of artificial intelligence and is the area of computational science that focuses on analysing and interpreting pattern and structures in data to enable learning, reasoning and decision making outside of human interaction. Machine learning allows the user to feed a computer algorithm with a lot of data and have the computer analyse and make data-driven recommendations and decisions based on only the input data. Leveraging these benefits of machine learning, the author is designing a utility that can predict the optimal machine parameters as an output while taking mould geometry details, raw material properties and known process parameters as the inputs.</p>
<p>This utility will attempt to eliminate the experimental method currently being used. It will reduce the wastage and costs associated with the experimental method. This method will also be faster than both the experimental and simulation method. Also, the intuitive nature of the process will be eliminated allowing for less trained staff to easily control the machines.</p>
<p>This utility uses an Artificial Neural Network (ANN), that has been already trained on a mix of real and simulated data. The trained ANN predicts the weight of the final part produced based on a set of machine parameters given as input. To find the optimal machine parameters, the utility first finds the actual weight of the part by multiplying the mould volume and raw material’s density. Then the ANN cycles through all the possible machine parameters in a predefined range, predicting the part weight for each combination. The utility then outputs the optimal combination for which the predicted weight is greater or equal to the actual weight of the part.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>The user requires <strong>Python3</strong> to be already installed on their systems to use this utility.</p>
<h4 id="on-windows">ON WINDOWS</h4>
<p>To install python3 on windows, the user can get the installer from <a href="https://www.python.org/downloads/">here</a>.</p>
<h4 id="on-linux">ON LINUX</h4>
<p>To install python3 on Linux, the user can run the following command in the terminal</p>
<pre><code>sudo apt-get update
sudo apt-get install python3
</code></pre>
<h4 id="other-dependencies">Other Dependencies</h4>
<p>The user can then manually install the dependencies of the project using the commands given below. Alternatively, they can run the get-dependencies.bat ( on Windows ) or <a href="http://get-dependencies.sh">get-dependencies.sh</a> ( on Linux ) to install the dependencies.</p>
<pre><code>pip install flask
pip install flask-sqlalchemy
pip install flask-wtf
pip install wtforms
pip install pyfladesk
pip install sklearn
pip install matplotlib
pip install numpy
pip install pandas
pip install joblib
pip install flask-bcrypt
pip install flask_login
pip install email_validator
</code></pre>
<h2 id="download">Download</h2>
<h5 id="option-1-">Option 1 :</h5>
<p>Users can download the archive from <a href="https://github.com/JOELKUNDU/MouldPredictor/archive/refs/heads/main.zip">here</a>.</p>
<h5 id="option-2">Option 2:</h5>
<p>Users can clone this repository using <strong>git</strong>, using the following commands.</p>
<pre><code>git clone https://github.com/JOELKUNDU/MouldPredictor.git
cd MouldPredictor
</code></pre>
<h2 id="installation">Installation</h2>
<p>The user has to first extract the .zip archive that he has downloaded.</p>
<h4 id="to-run-as-a-desktop-app">TO RUN AS A DESKTOP APP</h4>
<h5 id="on-windows-1">ON WINDOWS</h5>
<p>To run the utility on Windows, the user needs to run <strong>Predictor.exe</strong></p>
<h5 id="on-linux-1">ON LINUX</h5>
<p>To run the utility on Linux as a desktop app, the user can use the following command in the terminal ( in the directory )</p>
<pre><code>make
</code></pre>
<p>This will make an executable with the name <strong>Predictor-linux</strong> which the user can then run.</p>
<h4 id="to-run-as-a-web-app">TO RUN AS A WEB APP</h4>
<p>The utility can be used as a desktop app or it can also be used as a web app hosted on a server.<br>
To host the utility on a server, the user has to follow the following steps.</p>
<ul>
<li>The user has to edit the <strong>config.json</strong> file in the predictor and change the value for ServerMode from False (default) to True (Case-sensitive)<pre class=" language-json"><code class="prism  language-json"><span class="token punctuation">{</span>
  <span class="token string">"ServerMode"</span> <span class="token punctuation">:</span> <span class="token string">"True"</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
<li>The user has to install gunicorn with the command given below.<pre><code>pip install gunicorn
</code></pre>
</li>
<li>Make sure all the dependencies are present. If not please refer to the dependencies section</li>
<li>The user has to then open the terminal in the directory where the utility is saved and run the following command.<pre><code>gunicorn -w 4 -b 127.0.0.1:5000 run-server:app
</code></pre>
or<pre><code> bash server.sh
</code></pre>
</li>
<li>The web app would be hosted on <strong>https://{ip address of the server}/5000/</strong></li>
<li>To stop the server , the user can run the following comand.<pre><code> pkill gunicorn
</code></pre>
</li>
</ul>
<h2 id="usage">Usage</h2>
<h3 id="login-and-register">Login and Register</h3>
<p>Whenever the user starts the application he has to enter his username and password on the login page. He has to input his username and password in the ir respective fields to login. The user can user the <strong>Register</strong> button on the login page to make a new account.</p>
<h3 id="finding-optimal-machine-parameters-parameters">Finding optimal machine parameters parameters</h3>
<p>To find the optimal machine parameter the user has to do the following steps.</p>
<ul>
<li>The user has to open the <strong>Predict</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to fill the <strong>Predict Form</strong></li>
<li>The user has to click on the <strong>Predict</strong> button at the bottom of the <strong>Predict Form</strong></li>
<li>The output would be shown on the right pane under the <strong>Output</strong> section.</li>
</ul>
<h3 id="managing-the-database">Managing the database</h3>
<h4 id="adding-a-single-new-entry-to-the-database">Adding a single new entry to the database</h4>
<p>It is recommended that the users regularly add new data into the database to improve the performance of the utility. To add a single new entry into the database the user has to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Database</strong> tab from the navigation bar on the top of the screen</li>
<li>The user then has to then fill the form with the title <strong>" Fill this form to add a new entry in the database "</strong></li>
<li>The user has to click on the <strong>ADD</strong> button at the bottom of the form.</li>
<li>The new entry would be the last in the database.</li>
</ul>
<h4 id="adding-data-entries-from-a-csv-file">Adding data entries from a csv file</h4>
<p>Before adding data from a CSV file, the user must ensure that <strong>the columns in the csv file match the order of columns as shown in the database</strong> displayed in the <strong>Database</strong> tab.<br>
To add data entries via a csv file the users have to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Database</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to click on <strong>Choose file</strong> and then select the file in the dialog box that will open.</li>
<li>The user has to then click on the <strong>ADD</strong> button below the text field.</li>
<li>The new entries will be appended to the existing database.</li>
</ul>
<h4 id="deleting-one-entry-from-the-database">Deleting one entry from the database</h4>
<p>To delete one specific entry from the database the user has to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Database</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to scroll down and find the entry he wishes to delete.</li>
<li>The user can delete that specific entry by clicking on the delete button present on the right end of that row.</li>
</ul>
<h4 id="deleting-the-entire-database">Deleting the entire database</h4>
<p>It is recommended that the user exports the entire database before deleting it. To delete the entire database the user has to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Database</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to scroll down to the bottom of the screen.</li>
<li>The user has to then click on the red button labelled <strong>WARNING: DELETE ENTIRE DATABASE</strong></li>
<li>The entire database will be deleted</li>
</ul>
<h4 id="export-entire-database-as-a-csv">Export entire database as a CSV</h4>
<p>To export the entire database as a CSV, the user has to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Database</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to scroll down to the bottom of the screen.</li>
<li>The user has to click on the green button labelled <strong>EXPORT DATABASE AS CSV</strong></li>
<li>The entire database will be exported as a database.csv file on the desktop<br>
NOTE: Please ensure there is no database.csv file on the desktop else the function will fail.</li>
<li>If the application is being used as a web app then the file will simply be downloaded on the client system.</li>
</ul>
<h4 id="export-csv-format-to-add-data-to-the-database">Export CSV Format to add data to the database</h4>
<p>To export the CSV format that the user can use to input data to the dataset the user has to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Database</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to click on the <strong>GET CSV FORMAT</strong> button on the right of the add data via csv form.</li>
<li>Format.csv file will be placed on the user’s desktop.<br>
NOTE Please ensure there is no Format.csv file on the desktop else the function will fail.</li>
<li>If the application is being used as a web app then the file will simply be downloaded on the client system.</li>
</ul>
<h4 id="add-an-entirely-new-dataset-to-the-databse">Add an entirely new dataset to the databse</h4>
<p>To change the data that the model is being trained on the user has to follow the following steps.</p>
<ul>
<li>The user has to open the  <strong>Database</strong>  tab from the navigation bar on the top of the screen</li>
<li>The user has to scroll down to the bottom of the screen.</li>
<li>The user has to click on the green button labelled <strong>EXPORT DATABASE AS CSV</strong> to make a copy of the existing database.</li>
<li>If the user wished to remove the existing data then the user has to then click on the red button labelled <strong>WARNING: DELETE ENTIRE DATABASE</strong> else he can skip this step.</li>
<li>The user can then add the new data using a csv file using the steps given <a href="#adding-data-entries-from-a-csv-file">here</a> or add one entry at a time using the steps given <a href="#adding-a-single-new-entry-to-the-database">here</a>.</li>
<li>The user has to open the <strong>Model</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to scroll down to the bottom of the screen.</li>
<li>The user has to then click on the button labelled <strong>Auto-HyperTune the model</strong> and wait for the process to complete alternatively he can open a terminal (command prompt) in the root directory of the project and use the following command.<pre class=" language-bash"><code class="prism  language-bash">python man-hypertune.py
</code></pre>
</li>
<li>The user has to then open the <strong>Database</strong>  tab from the navigation bar on the top of the screen and then go through the new database to verify all the rows have their predicted error below 10%. The user must delete all the rows that have an error of higher than 10%.</li>
</ul>
<h3 id="managing-the-artificial-neural-network">Managing the Artificial Neural Network</h3>
<h4 id="understanding-the-performance-of-the-ann">Understanding the performance of the ANN</h4>
<p>To view the performance of the ANN, the user has to open the <strong>Model</strong> tab from the navigation bar on the top of the screen. When the screen loads, The user would be presented with a scatter plot ( Predicted weights vs Actual Weights ). The closer the scatters are to the diagonal of the chart, the better is the performance of the model. Below the plot, three performance metrics are shown.</p>
<ul>
<li>Absolute Mean Error ( lower the better )</li>
<li>Maximum Error ( lower the better )</li>
<li>Model Performance Score ( higher the better )</li>
</ul>
<p>The performance of the model can be increased by regularly retraining the ANN on the expanding database.<br>
The performance of the model can also be increased by occasionally hypertunning the model. However significant improvement might not happen after the first few uses of this tool</p>
<h4 id="hypertuning-the-model">HyperTuning the Model</h4>
<p>Hyper-Parameter tuning allows the model to tweak its setting automatically to better perform on the given dataset. This utility is fully automatic and requires no input from the user. To HyperTune the model, the user has to follow the following steps.</p>
<ul>
<li>The user has to open the <strong>Model</strong> tab from the navigation bar on the top of the screen</li>
<li>The user has to scroll down to the bottom of the screen.</li>
<li>The user has to click on the button labelled <strong>Auto-HyperTune the model</strong></li>
<li>This user can observe the process happening in the terminal window that opens along with the utility</li>
<li><strong>NOTE</strong>: This process will take time.</li>
</ul>
<h3 id="getting-help">Getting Help</h3>
<p>To resolve any issue related to how one can use the utility or to get information about the code, the user can refer to the manual that is present in the <strong>Help</strong> tab in the navigation bar.</p>
<h2 id="code-documentation">Code Documentation</h2>
<h3 id="technology-documentation">Technology Documentation</h3>
<p>This section includes links to the documentation or repositories of the technologies used in this project.</p>
<dl>
<dt>Flask</dt>
<dd><a href="https://flask.palletsprojects.com/en/1.1.x/">https://flask.palletsprojects.com/en/1.1.x/</a></dd>
<dt>Scikit-Learn</dt>
<dd><a href="https://scikit-learn.org/stable/">https://scikit-learn.org/stable/</a></dd>
<dt>PyFlaDesk</dt>
<dd><a href="https://github.com/smoqadam/PyFladesk">https://github.com/smoqadam/PyFladesk</a></dd>
<dt>SQLAlchemy</dt>
<dd><a href="https://docs.sqlalchemy.org/">https://docs.sqlalchemy.org/</a></dd>
<dt>Flask WTF</dt>
<dd><a href="https://flask-wtf.readthedocs.io/en/stable/">https://flask-wtf.readthedocs.io/en/stable/</a></dd>
<dt>WTForms</dt>
<dd><a href="https://wtforms.readthedocs.io/en/2.3.x/">https://wtforms.readthedocs.io/en/2.3.x/</a></dd>
<dt>Numpy</dt>
<dd><a href="https://numpy.org/doc/">https://numpy.org/doc/</a></dd>
<dt>Pandas</dt>
<dd><a href="https://pandas.pydata.org/docs/">https://pandas.pydata.org/docs/</a></dd>
<dt>MathPlotLib</dt>
<dd><a href="https://matplotlib.org/stable/contents.html">https://matplotlib.org/stable/contents.html</a></dd>
<dt>Joblib</dt>
<dd><a href="https://joblib.readthedocs.io/en/latest/">https://joblib.readthedocs.io/en/latest/</a></dd>
<dt>Os</dt>
<dd><a href="https://docs.python.org/3/library/os.html">https://docs.python.org/3/library/os.html</a></dd>
<dt>Shutil</dt>
<dd><a href="https://docs.python.org/3/library/shutil.html">https://docs.python.org/3/library/shutil.html</a></dd>
<dt>Flask_login</dt>
<dd><a href="https://flask-login.readthedocs.io/en/latest/">https://flask-login.readthedocs.io/en/latest/</a></dd>
<dt>Flask_Bcrypt</dt>
<dd><a href="https://flask-bcrypt.readthedocs.io/en/latest/">https://flask-bcrypt.readthedocs.io/en/latest/</a></dd>
</dl>
<hr>
<h3 id="python-script--database-.py">PYTHON SCRIPT : Database .py</h3>
<p>The functions in this script are mainly responsible for the retrieval and management of data to and from the database.</p>
<h4 id="def-add_from_csvfilepath">def add_from_csv(filepath)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">add_from_csv</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span><span class="token punctuation">:</span>
    dataframe <span class="token operator">=</span> np<span class="token punctuation">.</span>genfromtxt<span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">','</span><span class="token punctuation">)</span>
    dataframe <span class="token operator">=</span> np<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>dataframe<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    rows <span class="token operator">=</span> dataframe<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> rows<span class="token punctuation">)</span><span class="token punctuation">:</span>
        fill_time <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        injection_pres <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        holding_pres <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
        holding_time <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
        cooling_time <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>

        mould_temp <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>
        clamp_force <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span>
        shot_weight <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span>

        mould_SA <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span>
        mould_vol <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span>
        cavity_SA <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span>
        cavity_vol <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span>

        melt_temp <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span>
        mat_density <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span>
        mat_GF <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span>
        mat_MMFR <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span>
        part_weight <span class="token operator">=</span> dataframe<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span>
        entry_to_create <span class="token operator">=</span> Mould<span class="token punctuation">(</span>
								fill_time<span class="token operator">=</span>fill_time<span class="token punctuation">,</span>
								injection_pres<span class="token operator">=</span>injection_pres<span class="token punctuation">,</span>
								holding_pres<span class="token operator">=</span>holding_pres<span class="token punctuation">,</span>
								holding_time<span class="token operator">=</span>holding_time<span class="token punctuation">,</span>
								cooling_time<span class="token operator">=</span>cooling_time<span class="token punctuation">,</span>
								mould_temp<span class="token operator">=</span>mould_temp<span class="token punctuation">,</span>
								clamp_force<span class="token operator">=</span>clamp_force<span class="token punctuation">,</span>
								shot_weight<span class="token operator">=</span>shot_weight<span class="token punctuation">,</span>
								mould_SA<span class="token operator">=</span>mould_SA<span class="token punctuation">,</span>
								mould_vol<span class="token operator">=</span>mould_vol<span class="token punctuation">,</span>
								cavity_SA<span class="token operator">=</span>cavity_SA<span class="token punctuation">,</span>
								cavity_vol<span class="token operator">=</span>cavity_vol<span class="token punctuation">,</span>
								melt_temp<span class="token operator">=</span>melt_temp<span class="token punctuation">,</span>
								mat_density<span class="token operator">=</span>mat_density<span class="token punctuation">,</span>
								mat_GF<span class="token operator">=</span>mat_GF<span class="token punctuation">,</span>
								mat_MMFR<span class="token operator">=</span>mat_MMFR<span class="token punctuation">,</span>
								part_weight<span class="token operator">=</span>part_weight<span class="token punctuation">,</span>
							  <span class="token punctuation">)</span>
        entry_to_create<span class="token punctuation">.</span>add_self<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This method takes a string with the file path to the csv file as input and imports the dataset into the database from that .csv file. This method doesn’t verify that the columns are in the correct sequence or have valid values. This has to be done by the user beforehand.</p>
<dl>
<dt>filepath</dt>
<dd>String containing the path to the CSV file to be imported</dd>
</dl>
<p>NOTE: This function returns nothing<br>
NOTE: In case of adding new attributes to the dataset this function has to be modified.</p>
<h4 id="def-get_datasets">def get_datasets()</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">get_datasets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    entries <span class="token operator">=</span> Mould<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    dataframe <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">if</span> entries<span class="token punctuation">:</span>
        <span class="token keyword">for</span> entry <span class="token keyword">in</span> entries<span class="token punctuation">:</span>
            data_object <span class="token operator">=</span> <span class="token punctuation">[</span>
	              entry<span class="token punctuation">.</span>fill_time<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>injection_pres<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>holding_pres<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>holding_time<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>cooling_time<span class="token punctuation">,</span>

				  entry<span class="token punctuation">.</span>mould_temp<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>clamp_force<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>shot_weight<span class="token punctuation">,</span>

				  entry<span class="token punctuation">.</span>mould_SA<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mould_vol<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>cavity_SA<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>cavity_vol<span class="token punctuation">,</span>

				  entry<span class="token punctuation">.</span>melt_temp<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mat_density<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mat_GF<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mat_MMFR<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>part_weight
            <span class="token punctuation">]</span>
            dataframe<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data_object<span class="token punctuation">)</span>
        dataframe <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>dataframe<span class="token punctuation">)</span>

        x <span class="token operator">=</span> dataframe<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span>dataframe<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
        y <span class="token operator">=</span> dataframe<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> dataframe<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>

        <span class="token keyword">return</span> x<span class="token punctuation">,</span> y
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre>
<p>This method loads the dataset from the sqlalchemy database (data.db) and returns the following arrays</p>
<dl>
<dt>x</dt>
<dd>np.array containing all the features of the dataset.</dd>
<dt>y</dt>
<dd>np.array containing all the part weights corresponding to the rows of features in x.<br>
NOTE: In case of adding new attributes to the dataset this function has to be modified.</dd>
</dl>
<h4 id="def-purge">def purge():</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">purge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    entries <span class="token operator">=</span> Mould<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> entry <span class="token keyword">in</span> entries<span class="token punctuation">:</span>
        entry<span class="token punctuation">.</span>delete_self<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This method erases the entire database<br>
NOTE: This function returns nothing</p>
<h4 id="def-exportcsv">def exportCSV():</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">exportCSV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'nt'</span><span class="token punctuation">:</span>
        dest <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'USERPROFILE'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Desktop\\database.csv'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        desktop <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">'~'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Desktop'</span><span class="token punctuation">)</span>
        dest <span class="token operator">=</span> desktop <span class="token operator">+</span> <span class="token string">'/database.csv'</span>
  <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>
 <span class="token keyword">else</span><span class="token punctuation">:</span>
        entries <span class="token operator">=</span> Mould<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        dataframe <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> entry <span class="token keyword">in</span> entries<span class="token punctuation">:</span>
            data_object <span class="token operator">=</span> <span class="token punctuation">[</span>
                  entry<span class="token punctuation">.</span>fill_time<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>injection_pres<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>holding_pres<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>holding_time<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>cooling_time<span class="token punctuation">,</span>

				  entry<span class="token punctuation">.</span>mould_temp<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>clamp_force<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>shot_weight<span class="token punctuation">,</span>

				  entry<span class="token punctuation">.</span>mould_SA<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mould_vol<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>cavity_SA<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>cavity_vol<span class="token punctuation">,</span>

				  entry<span class="token punctuation">.</span>melt_temp<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mat_density<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mat_GF<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>mat_MMFR<span class="token punctuation">,</span>
				  entry<span class="token punctuation">.</span>part_weight
            <span class="token punctuation">]</span>
            dataframe<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data_object<span class="token punctuation">)</span>
        dataframe <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>dataframe<span class="token punctuation">)</span>
        DF <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>dataframe<span class="token punctuation">)</span>
        DF<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span><span class="token string">'predictor/uploads/database.csv'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> header<span class="token operator">=</span>headerLabels<span class="token punctuation">)</span>
        source <span class="token operator">=</span> <span class="token string">'predictor/uploads/database.csv'</span>
	    shutil<span class="token punctuation">.</span>copyfile<span class="token punctuation">(</span>source<span class="token punctuation">,</span> dest<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre>
<p>This method exports the entire dataset in file name database.csv on the user’s desktop.<br>
NOTE: This function returns true when successful, else it will return false.</p>
<h4 id="def-exportcsvformat">def exportCSVFormat():</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">exportCSVFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'nt'</span><span class="token punctuation">:</span>
        dest <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'USERPROFILE'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Desktop\\Format.csv'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        desktop <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span><span class="token string">'~'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'Desktop'</span><span class="token punctuation">)</span>
        dest <span class="token operator">=</span> desktop <span class="token operator">+</span> <span class="token string">'/Format.csv'</span>
	<span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>dest<span class="token punctuation">)</span><span class="token punctuation">:</span>
	    <span class="token keyword">return</span> <span class="token boolean">False</span>
	<span class="token keyword">else</span><span class="token punctuation">:</span>
	    source <span class="token operator">=</span> <span class="token string">'predictor/uploads/Format.csv'</span>
	shutil<span class="token punctuation">.</span>copyfile<span class="token punctuation">(</span>source<span class="token punctuation">,</span> dest<span class="token punctuation">)</span>
	    <span class="token keyword">return</span> <span class="token boolean">True</span>
</code></pre>
<p>This method exports the CSV format that the user can then use to enter data into the database by using the add_from_csv function.<br>
NOTE: This function returns true when successful, else it will return false</p>
<h4 id="def-serverexportcsv">def serverExportCSV():</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">serverExportCSV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    entries <span class="token operator">=</span> Mould<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    dataframe <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> entry <span class="token keyword">in</span> entries<span class="token punctuation">:</span>
        data_object <span class="token operator">=</span> <span class="token punctuation">[</span>
			entry<span class="token punctuation">.</span>fill_time<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>injection_pres<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>holding_pres<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>holding_time<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>cooling_time<span class="token punctuation">,</span>

			entry<span class="token punctuation">.</span>mould_temp<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>clamp_force<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>shot_weight<span class="token punctuation">,</span>

			entry<span class="token punctuation">.</span>mould_SA<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>mould_vol<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>cavity_SA<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>cavity_vol<span class="token punctuation">,</span>

			entry<span class="token punctuation">.</span>melt_temp<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>mat_density<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>mat_GF<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>mat_MMFR<span class="token punctuation">,</span>
			entry<span class="token punctuation">.</span>part_weight
        <span class="token punctuation">]</span>
        dataframe<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data_object<span class="token punctuation">)</span>
    dataframe <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>dataframe<span class="token punctuation">)</span>
    DF <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>dataframe<span class="token punctuation">)</span>
    source <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'CLIENT_CSV'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'database.csv'</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>source<span class="token punctuation">)</span>
    DF<span class="token punctuation">.</span>to_csv<span class="token punctuation">(</span>source<span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> header<span class="token operator">=</span>headerLabels<span class="token punctuation">)</span>
    <span class="token keyword">return</span> send_file<span class="token punctuation">(</span>source<span class="token punctuation">,</span> as_attachment<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> attachment_filename<span class="token operator">=</span><span class="token string">'database.csv'</span><span class="token punctuation">)</span>
</code></pre>
<p>This function converts the database to a csv file and sends it to the user when in web app mode.</p>
<h4 id="def-serverexportcsvformat">def serverExportCSVFormat():</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">serverExportCSVFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    source <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'CLIENT_CSV'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'format.csv'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> send_file<span class="token punctuation">(</span>source<span class="token punctuation">,</span> as_attachment<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> attachment_filename<span class="token operator">=</span><span class="token string">'format.csv'</span><span class="token punctuation">)</span>
</code></pre>
<p>This function sends the csv format to the user when in web app mode.</p>
<hr>
<h3 id="python-script-forms-.py">PYTHON SCRIPT: Forms .py</h3>
<p>The classes in this script define all the WTForms used across the utility. Detailed definitions of the wtforms functions used in this script can be found <a href="https://flask-wtf.readthedocs.io/en/stable/">here</a>  and <a href="https://wtforms.readthedocs.io/en/2.3.x/">here</a>.<br>
NOTE: FlaskForm is a class provided by the flask_wtf module and its details can be found from the above links.</p>
<h4 id="class-predictform-flaskform">class PredictForm (FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">PredictForm</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>

    Fill_time_min <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Fill time Min'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Fill Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Fill Time'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Fill_time_max <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Fill time Max'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Fill Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Fill Time'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Fill_time_res <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Fill time Res'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Fill Time Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Fill Time Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Injection_pres_min <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Injection pressure Min'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Injection Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Injection Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Injection_pres_max <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Injection pressure Max'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Injection Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Injection Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Injection_pres_res <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Injection pressure Res'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Injection Pressure Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Injection Pressure Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Holding_pres_min <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding PressureMin'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Holding Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Holding Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Holding_pres_max <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding PressureMax'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Holding Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Holding Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Holding_pres_res <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding PressureRes'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Holding Pressure Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Holding Pressure Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Holding_time_min <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding time Min'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Holding Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Holding Time'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Holding_time_max <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding time Max'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Holding Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Holding Time'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Holding_time_res <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding time Res'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Holding Time Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Holding Time Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Cooling_time_min <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Cooling time Min'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Cooling Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Minimum Cooling Time'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cooling_time_max <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Cooling time Max'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Cooling Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Maximum Cooling Time'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cooling_time_res <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Cooling time Res'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cooling Time Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cooling Time Resolution'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Mould_temp <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Mould Temp in Cel'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Temperature'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Temperature'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Clamp_force <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Clamp force in tonnes'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Clamp Force'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Clamp Force'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Shot_Weight <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Surface Area in mm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Shot Weight'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Shot Weight'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Mould_SA <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Surface Area in mm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Surface Area'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Surface Area'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mould_vol <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Volume in cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Volume'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Volume'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cavity_SA <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Surface Area in mm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cavity Surface Area'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cavity Surface Area'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cavity_vol <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Volume in cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cavity Volume'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cavity Volume'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    Mat_density <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Material Density g/cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Density'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Density'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Melt_temp <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Melt Temp in Cel'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Melt Temperature'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Melt Temperature'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mat_GF <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Melt Temp in Cel'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material GF%'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material GF%'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mat_MMFR <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Material Density g/cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Melt Mass Flow Rate'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Melt Mass Flow Rate'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Predict'</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the input fields for the Predict form the is shown in the Predict tab of the utility.<br>
NOTE: In case of adding new attributes to the dataset this class has to be modified.</p>
<h4 id="class-addentryform-flaskform">class AddEntryForm (FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">AddEntryForm</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    Fill_time <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Fill time'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Fill Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Injection_pres <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Injection pressure'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Injection Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Holding_pres <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding Pressure'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Holding Pressure'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Holding_time <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Holding time'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Holding Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cooling_time <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Cooling time'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cooling Time'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mould_temp <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Mould Temp in Cel'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Temp'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Clamp_force <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Clamp force in tonnes'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Clamp Force'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Shot_Weight <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Surface Area in mm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Shot Weight'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mould_SA <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Surface Area in mm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Surface Area'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mould_vol <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Volume in cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Mould Volume'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cavity_SA <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Surface Area in mm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cavity Surface Area'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Cavity_vol <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Mould Volume in cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Cavity Volume'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mat_density <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Material Density g/cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Density'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Melt_temp <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Melt Temp in Cel'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Melt Temperature'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mat_GF <span class="token operator">=</span> IntegerField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Melt Temp in Cel'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material GF%'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Mat_MMFR <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Material Density g/cm3"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Material Melt Mass Flow Rate'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    Part_weight <span class="token operator">=</span> FloatField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Part Weight"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for Part Weight'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NumberRange<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">999999</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">'Please enter a valid input'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'ADD'</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the input fields for the form to add a new entry to the dataset in the database tab of the utility.<br>
NOTE: In case of adding new attributes to the dataset this class has to be modified.</p>
<h4 id="class-addentrycsvflaskform">class AddEntryCSV(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">AddEntryCSV</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">file</span> <span class="token operator">=</span> FileField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"csv file path"</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">'Please enter a valid input for '</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'ADD'</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the input field for the form to add data to the dataset using a csv file that is available in the database tab of the utility.</p>
<h4 id="class-deleteentryformflaskform">class DeleteEntryForm(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python">
<span class="token keyword">class</span> <span class="token class-name">DeleteEntryForm</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"DELETE"</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the delete button present in each row of the dataset the is shown when the user accesses the database tab of the utility</p>
<h4 id="class-class-deleteallentriesflaskform">class class DeleteAllEntries(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">DeleteAllEntries</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"WARNING: DELETE ENTIRE DATABASE"</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the delete entire database button on the bottom of the screen of the database tab.</p>
<h4 id="class-exportallentriesflaskform">class ExportAllEntries(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">ExportAllEntries</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"EXPORT DATABASE AS CSV"</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the EXPORT DATABASE AS CSV button on the bottom of the screen of the database tab.</p>
<h4 id="class-getcsvformatflask-form">class GetCSVFormat(Flask Form)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">GetCSVFormatForm</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"GET CSV FORMAT"</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the GET CSV FORMAT button shown beside the add data form csv form in the database tab.</p>
<h4 id="class-retrainmodelflaskform">class RetrainModel(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">RetrainModel</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Retrain the model"</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the Retrain the model button shown at the bottom of the screen of the model tab.</p>
<h4 id="class-hypertunemodelflaskform">class HyperTuneModel(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">HyperTuneModel</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">"Auto-HyperTune the model"</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the Auto Hyper-Tune the model button shown at the bottom of the screen of the model tab.</p>
<p>User can refer to the functions in models .py, machine_learning .py, database .py or routes .py to understand how each of these form’s logic is implemented.</p>
<h4 id="class-registerformflaskform">class RegisterForm(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">RegisterForm</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">validate_username</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username_to_check<span class="token punctuation">)</span><span class="token punctuation">:</span>
        user <span class="token operator">=</span> User<span class="token punctuation">.</span>query<span class="token punctuation">.</span>filter_by<span class="token punctuation">(</span>username<span class="token operator">=</span>username_to_check<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> user<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span><span class="token string">'Username already exists! Please try a different username'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">validate_email_address</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> email_address_to_check<span class="token punctuation">)</span><span class="token punctuation">:</span>
        email_address <span class="token operator">=</span> User<span class="token punctuation">.</span>query<span class="token punctuation">.</span>filter_by<span class="token punctuation">(</span>email_address<span class="token operator">=</span>email_address_to_check<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> email_address<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span><span class="token string">'Email Address already exists! Please try a different email address'</span><span class="token punctuation">)</span>

    username <span class="token operator">=</span> StringField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'User Name:'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>Length<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DataRequired<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    email_address <span class="token operator">=</span> StringField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Email Address:'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>Email<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DataRequired<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    password1 <span class="token operator">=</span> PasswordField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Password:'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>Length<span class="token punctuation">(</span><span class="token builtin">min</span><span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DataRequired<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    password2 <span class="token operator">=</span> PasswordField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Confirm Password:'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>EqualTo<span class="token punctuation">(</span><span class="token string">'password1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> DataRequired<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Create Account'</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the Register form that the user uses to create a new account in the system.</p>
<h4 id="class-loginformflaskform">class LoginForm(FlaskForm)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">LoginForm</span><span class="token punctuation">(</span>FlaskForm<span class="token punctuation">)</span><span class="token punctuation">:</span>
    username <span class="token operator">=</span> StringField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'User Name:'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    password <span class="token operator">=</span> PasswordField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Password:'</span><span class="token punctuation">,</span> validators<span class="token operator">=</span><span class="token punctuation">[</span>DataRequired<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    submit <span class="token operator">=</span> SubmitField<span class="token punctuation">(</span>label<span class="token operator">=</span><span class="token string">'Sign in'</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the Login form that the user uses to login.</p>
<hr>
<h3 id="python-script-machine_learning-.py">PYTHON SCRIPT: Machine_learning .py</h3>
<p>This script implements all the functions that enable machine learning aspects of the utility. Detailed documentation about the scikit-learn library can be found <a href="https://scikit-learn.org/stable/">here</a>.</p>
<h4 id="class-modelmetric">class ModelMetric</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">ModelMetrics</span><span class="token punctuation">:</span>
    absolute_mean_error <span class="token operator">=</span> <span class="token number">0.0</span>
	modelScore <span class="token operator">=</span> <span class="token number">0.0</span>
	max_error <span class="token operator">=</span> <span class="token number">0.0</span>

	<span class="token keyword">def</span> <span class="token function">printMetric</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>modelScore<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>max_error<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>absolute_mean_error<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">savePerformance</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        DBModelMetrics<span class="token punctuation">(</span>absolute_mean_error<span class="token operator">=</span>self<span class="token punctuation">.</span>absolute_mean_error<span class="token punctuation">,</span>
		model_score<span class="token operator">=</span>self<span class="token punctuation">.</span>modelScore<span class="token punctuation">,</span>
		max_error<span class="token operator">=</span>self<span class="token punctuation">.</span>max_error<span class="token punctuation">)</span><span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">loadPerformance</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        perf <span class="token operator">=</span> DBModelMetrics<span class="token punctuation">.</span>query<span class="token punctuation">.</span>filter_by<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>absolute_mean_error <span class="token operator">=</span> perf<span class="token punctuation">.</span>absolute_mean_error
        self<span class="token punctuation">.</span>modelScore <span class="token operator">=</span> perf<span class="token punctuation">.</span>model_score
        self<span class="token punctuation">.</span>max_error <span class="token operator">=</span> perf<span class="token punctuation">.</span>max_error

ml_metrics <span class="token operator">=</span> ModelMetrics<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>The main function of the object of this class is to save data about the model’s performance from training and tuning events and to store and retrieve them from the database. The following performance metrics are stored.</p>
<dl>
<dt>absolute_mean_error</dt>
<dd>This is a measure of errors between paired observations expressing the same phenomenon.</dd>
<dt>max_error</dt>
<dd>This is the maximum amount you expect a system to be off by.</dd>
<dt>modelScore</dt>
<dd>This return the coefficient of determination R^2 of the prediction,<br>
details of which can be found <a href="https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPRegressor.html?highlight=mlp%20regressor">here</a> (score method of MLPRegressor model).</dd>
</dl>
<p>Other methods of the class are described below.</p>
<ul>
<li><strong>def printMetric(self)</strong>
<ul>
<li>This function prints the values stored in the object on the console window.</li>
</ul>
</li>
<li><strong>def savePerformance(self)</strong>
<ul>
<li>This function saves the values stored in object in the database.</li>
</ul>
</li>
<li><strong>def loadPerformance(self)</strong>
<ul>
<li>This function loads previously saved data about the model’s performance from the database.</li>
</ul>
</li>
</ul>
<h4 id="def-hypertune">def hyperTune()</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">hyperTune</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    parameter_space <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token string">'hidden_layer_sizes'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'activation'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'tanh'</span><span class="token punctuation">,</span> <span class="token string">'relu'</span><span class="token punctuation">,</span> <span class="token string">'logistic'</span><span class="token punctuation">,</span> <span class="token string">'identity'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'solver'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'sgd'</span><span class="token punctuation">,</span> <span class="token string">'adam'</span><span class="token punctuation">,</span> <span class="token string">'lbfgs'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'alpha'</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.0001</span><span class="token punctuation">,</span>
			<span class="token number">0.002</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.0002</span><span class="token punctuation">,</span>
			<span class="token number">0.003</span><span class="token punctuation">,</span> <span class="token number">0.03</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.0003</span><span class="token punctuation">,</span>
			<span class="token number">0.004</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.0004</span><span class="token punctuation">,</span>
			<span class="token number">0.005</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0005</span><span class="token punctuation">,</span>
			<span class="token number">0.006</span><span class="token punctuation">,</span> <span class="token number">0.06</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.0006</span><span class="token punctuation">,</span>
			<span class="token number">0.007</span><span class="token punctuation">,</span> <span class="token number">0.07</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">0.0007</span><span class="token punctuation">,</span>
			<span class="token number">0.008</span><span class="token punctuation">,</span> <span class="token number">0.08</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.0008</span><span class="token punctuation">,</span>
			<span class="token number">0.009</span><span class="token punctuation">,</span> <span class="token number">0.09</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">0.0009</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'learning_rate'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'constant'</span><span class="token punctuation">,</span> <span class="token string">'adaptive'</span><span class="token punctuation">,</span> <span class="token string">'invscaling'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'learning_rate_init'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.0001</span><span class="token punctuation">,</span>
			<span class="token number">0.002</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.0002</span><span class="token punctuation">,</span>
			<span class="token number">0.003</span><span class="token punctuation">,</span> <span class="token number">0.03</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.0003</span><span class="token punctuation">,</span>
			<span class="token number">0.004</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.0004</span><span class="token punctuation">,</span>
			<span class="token number">0.005</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0005</span><span class="token punctuation">,</span>
			<span class="token number">0.006</span><span class="token punctuation">,</span> <span class="token number">0.06</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.0006</span><span class="token punctuation">,</span>
			<span class="token number">0.007</span><span class="token punctuation">,</span> <span class="token number">0.07</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">0.0007</span><span class="token punctuation">,</span>
			<span class="token number">0.008</span><span class="token punctuation">,</span> <span class="token number">0.08</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.0008</span><span class="token punctuation">,</span>
			<span class="token number">0.009</span><span class="token punctuation">,</span> <span class="token number">0.09</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">0.0009</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'random_state'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1399</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'warm_start'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'max_iter'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">75000</span><span class="token punctuation">,</span> <span class="token number">125000</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string">'verbose'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    trained_model <span class="token operator">=</span> MLPRegressor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    X<span class="token punctuation">,</span> y <span class="token operator">=</span> database<span class="token punctuation">.</span>get_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span>
    X<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.33</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    clf <span class="token operator">=</span> RandomizedSearchCV<span class="token punctuation">(</span>trained_model<span class="token punctuation">,</span> parameter_space<span class="token punctuation">,</span> n_jobs<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> cv<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n\n\nBEST PARAMS'</span><span class="token punctuation">,</span> clf<span class="token punctuation">.</span>best_params_<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n\n\nResults'</span><span class="token punctuation">,</span> clf<span class="token punctuation">.</span>cv_results_<span class="token punctuation">)</span>

	pred <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>

	ml_metrics<span class="token punctuation">.</span>absolute_mean_error <span class="token operator">=</span> metrics<span class="token punctuation">.</span>mean_absolute_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>
	ml_metrics<span class="token punctuation">.</span>modelScore <span class="token operator">=</span> getScore<span class="token punctuation">(</span><span class="token punctuation">)</span>
	ml_metrics<span class="token punctuation">.</span>max_error <span class="token operator">=</span> metrics<span class="token punctuation">.</span>max_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>
	ml_metrics<span class="token punctuation">.</span>savePerformance<span class="token punctuation">(</span><span class="token punctuation">)</span>

	pred <span class="token operator">=</span> clf<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>

	<span class="token comment"># Preparing the scatter plot of the model's prediction  </span>
	plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token punctuation">,</span> pred<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span>
	plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Actual Weight'</span><span class="token punctuation">)</span>
	plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Predicted Weight'</span><span class="token punctuation">)</span>
	plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Scatter Plot (Actual vs Predicted Part Weight)'</span><span class="token punctuation">)</span>
	<span class="token comment"># save the plot  </span>
	plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/performance.png'</span><span class="token punctuation">,</span> bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
	ml_metrics<span class="token punctuation">.</span>loadPerformance<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	    os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
	jl<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>clf<span class="token punctuation">,</span> <span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
</code></pre>
<p>This function uses <a href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.RandomizedSearchCV.html?highlight=randomized#sklearn.model_selection.RandomizedSearchCV">RandomizedSearchCV</a> from scikit learn library to set the optimal parameters for the ANN. Since the method is randomized a few executions of this method might be required before optimal parameters can be set. This function is also responsible for saving the optimized model for later use. This is implemented using the joblib library</p>
<h4 id="def-mlprmodelx_test">def MLPRmodel(X_test)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">MLPRmodel</span><span class="token punctuation">(</span>X_test<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        hyperTune<span class="token punctuation">(</span><span class="token punctuation">)</span>
        model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
  pred <span class="token operator">=</span> model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>
  <span class="token keyword">return</span> pred
</code></pre>
<p>This function verifies if a trained model exists else it will call the hypertune() function to create and optimized the model first. Then this function will load the optimized model and use it to make predictions using the data passed in the <strong>X_test</strong> list and returns those predictions as a list.</p>
<h4 id="def-getscore">def getScore():</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">getScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	trained_model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
	X<span class="token punctuation">,</span> y <span class="token operator">=</span> database<span class="token punctuation">.</span>get_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> trained_model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
</code></pre>
<p>This return the coefficient of determination R^2 of the predictions made by the model,<br>
details of which can be found <a href="https://scikit-learn.org/stable/modules/generated/sklearn.neural_network.MLPRegressor.html?highlight=mlp%20regressor">here</a> (score method of MLPRegressor model).</p>
<h4 id="def-init_load_up">def init_load_up()</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">init_load_up</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        hyperTune<span class="token punctuation">(</span><span class="token punctuation">)</span>
        X<span class="token punctuation">,</span> y <span class="token operator">=</span> database<span class="token punctuation">.</span>get_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span>
        X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.33</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        pred <span class="token operator">=</span> MLPRmodel<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>

        ml_metrics<span class="token punctuation">.</span>absolute_mean_error <span class="token operator">=</span> metrics<span class="token punctuation">.</span>mean_absolute_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>
        ml_metrics<span class="token punctuation">.</span>modelScore <span class="token operator">=</span> getScore<span class="token punctuation">(</span><span class="token punctuation">)</span>
        ml_metrics<span class="token punctuation">.</span>max_error <span class="token operator">=</span> metrics<span class="token punctuation">.</span>max_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>
        ml_metrics<span class="token punctuation">.</span>savePerformance<span class="token punctuation">(</span><span class="token punctuation">)</span>

        plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Actual Weight'</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Predicted Weight'</span><span class="token punctuation">)</span>
        plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Scatter Plot (Actual vs Predicted Part Weight)'</span><span class="token punctuation">)</span>
        <span class="token comment"># save the plot  </span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/performance.png'</span><span class="token punctuation">,</span> bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
    ml_metrics<span class="token punctuation">.</span>loadPerformance<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This function is executed whenever the utility is loaded and this ensures that the model exists. if not then it calls on the hypertune() function to create an optimized model. It will then measure the model’s performance and will save it into the database. This function also creates the scatter plot chart shown in the model tab using the MathPlotLib library.</p>
<h4 id="def-retrain">def retrain()</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">retrain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    X<span class="token punctuation">,</span> y <span class="token operator">=</span> database<span class="token punctuation">.</span>get_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># Splitting the data into test and trained data  </span>
    X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.33</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment"># Training the model and verifying the mean absolute error  </span>

    trained_model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>

    trained_model<span class="token punctuation">.</span>partial_fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>
    pred <span class="token operator">=</span> trained_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>

    ml_metrics<span class="token punctuation">.</span>absolute_mean_error <span class="token operator">=</span> metrics<span class="token punctuation">.</span>mean_absolute_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>
    ml_metrics<span class="token punctuation">.</span>modelScore <span class="token operator">=</span> getScore<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ml_metrics<span class="token punctuation">.</span>max_error <span class="token operator">=</span> metrics<span class="token punctuation">.</span>max_error<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>
    ml_metrics<span class="token punctuation">.</span>savePerformance<span class="token punctuation">(</span><span class="token punctuation">)</span>

    pred <span class="token operator">=</span> trained_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>

    <span class="token comment"># Preparing the scatter plot of the model's prediction  </span>
	plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>y<span class="token punctuation">,</span> pred<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Actual Weight'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Predicted Weight'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Scatter Plot (Actual vs Predicted Part Weight)'</span><span class="token punctuation">)</span>
    <span class="token comment"># save the plot  </span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/performance.png'</span><span class="token punctuation">,</span> bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
    ml_metrics<span class="token punctuation">.</span>loadPerformance<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This function loads the database and divides it into training and testing data. This function then loads the ANN model and retrains it on the training data and calculates the model’s performance metrics using the testing data. This function also recreates the scatter plot of the model’s performance using the MathPlotLib library.</p>
<h4 id="def-getpredict-fill_time-injection_pres-holding_pres-holding_time-cooling_time-mould_temp-clamp_force-shot_weight-mould_sa-mould_vol-cavity_sa-cavity_vol-melt_temp-mat_density-mat_gf-mat_mmfr">def getPredict (Fill_time, Injection_pres, Holding_pres, Holding_time, Cooling_time, Mould_temp, Clamp_force, Shot_Weight, Mould_SA, Mould_vol, Cavity_SA, Cavity_vol, Melt_temp, Mat_density, Mat_GF, Mat_MMFR)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">getPredict</span><span class="token punctuation">(</span>Fill_time<span class="token punctuation">,</span> Injection_pres<span class="token punctuation">,</span> Holding_pres<span class="token punctuation">,</span> Holding_time<span class="token punctuation">,</span> Cooling_time<span class="token punctuation">,</span>
  Mould_temp<span class="token punctuation">,</span> Clamp_force<span class="token punctuation">,</span> Shot_Weight<span class="token punctuation">,</span>
  Mould_SA<span class="token punctuation">,</span> Mould_vol<span class="token punctuation">,</span> Cavity_SA<span class="token punctuation">,</span> Cavity_vol<span class="token punctuation">,</span>
  Melt_temp<span class="token punctuation">,</span> Mat_density<span class="token punctuation">,</span> Mat_GF<span class="token punctuation">,</span> Mat_MMFR<span class="token punctuation">)</span><span class="token punctuation">:</span>
    init_load_up<span class="token punctuation">(</span><span class="token punctuation">)</span>
    trained_model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
    X <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Fill_time<span class="token punctuation">,</span> Injection_pres<span class="token punctuation">,</span> Holding_pres<span class="token punctuation">,</span> Holding_time<span class="token punctuation">,</span> Cooling_time<span class="token punctuation">,</span>
		  Mould_temp<span class="token punctuation">,</span> Clamp_force<span class="token punctuation">,</span> Shot_Weight<span class="token punctuation">,</span>
		  Mould_SA<span class="token punctuation">,</span> Mould_vol<span class="token punctuation">,</span> Cavity_SA<span class="token punctuation">,</span> Cavity_vol<span class="token punctuation">,</span>
		  Melt_temp<span class="token punctuation">,</span> Mat_density<span class="token punctuation">,</span> Mat_GF<span class="token punctuation">,</span> Mat_MMFR<span class="token punctuation">]</span><span class="token punctuation">]</span>
    pred <span class="token operator">=</span> trained_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
	pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">abs</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>part_weight<span class="token punctuation">)</span><span class="token operator">/</span>part_weight<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>This functions takes the values from the variables in the parameter list, converts them into a list that can be passed into the model. It then loads the model and passes the previously created list to get one prediction. The function then returns this prediction.</p>
<h4 id="def-predict-fill_time_min-fill_time_max-fill_time_res-injection_pres_min-injection_pres_max-injection_pres_res--holding_pres_min-holding_pres_max-holding_pres_res--holding_time_min-holding_time_max-holding_time_res--cooling_time_min-cooling_time_max-cooling_time_res--mould_temp-clamp_force-shot_weight--mould_sa-mould_vol-cavity_sa-cavity_vol--mat_density-melt_temp-mat_gf-mat_mmfr">def predict (Fill_time_min, Fill_time_max, Fill_time_res, Injection_pres_min, Injection_pres_max, Injection_pres_res,  Holding_pres_min, Holding_pres_max, Holding_pres_res,  Holding_time_min, Holding_time_max, Holding_time_res,  Cooling_time_min, Cooling_time_max, Cooling_time_res,  Mould_temp, Clamp_force, Shot_Weight,  Mould_SA, Mould_vol, Cavity_SA, Cavity_vol,  Mat_density, Melt_temp, Mat_GF, Mat_MMFR)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">predict</span><span class="token punctuation">(</span>
  Fill_time_min<span class="token punctuation">,</span> Fill_time_max<span class="token punctuation">,</span> Fill_time_res<span class="token punctuation">,</span>
  Injection_pres_min<span class="token punctuation">,</span> Injection_pres_max<span class="token punctuation">,</span> Injection_pres_res<span class="token punctuation">,</span>
  Holding_pres_min<span class="token punctuation">,</span> Holding_pres_max<span class="token punctuation">,</span> Holding_pres_res<span class="token punctuation">,</span>
  Holding_time_min<span class="token punctuation">,</span> Holding_time_max<span class="token punctuation">,</span> Holding_time_res<span class="token punctuation">,</span>
  Cooling_time_min<span class="token punctuation">,</span> Cooling_time_max<span class="token punctuation">,</span> Cooling_time_res<span class="token punctuation">,</span>
  Mould_temp<span class="token punctuation">,</span> Clamp_force<span class="token punctuation">,</span> Shot_Weight<span class="token punctuation">,</span>
  Mould_SA<span class="token punctuation">,</span> Mould_vol<span class="token punctuation">,</span> Cavity_SA<span class="token punctuation">,</span> Cavity_vol<span class="token punctuation">,</span>
  Mat_density<span class="token punctuation">,</span> Melt_temp<span class="token punctuation">,</span> Mat_GF<span class="token punctuation">,</span> Mat_MMFR
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    init_load_up<span class="token punctuation">(</span><span class="token punctuation">)</span>
    trained_model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
    weight_actual <span class="token operator">=</span> Mould_vol <span class="token operator">*</span> Mat_density
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\nweight:"</span><span class="token punctuation">,</span> weight_actual<span class="token punctuation">)</span>
    first_pred <span class="token operator">=</span> <span class="token boolean">True</span>
	param <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> ft <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>Fill_time_min<span class="token punctuation">,</span> Fill_time_max <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> Fill_time_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> ip <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>Injection_pres_min<span class="token punctuation">,</span> Injection_pres_max <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> Injection_pres_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> hp <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>Holding_pres_min<span class="token punctuation">,</span> Holding_pres_max <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> Holding_pres_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> ht <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>Holding_time_min<span class="token punctuation">,</span> Holding_time_max <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> Holding_time_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">for</span> ct <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>Cooling_time_min<span class="token punctuation">,</span> Cooling_time_max <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> Cooling_time_res<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        X <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>ft<span class="token punctuation">,</span> ip<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> ht<span class="token punctuation">,</span> ct<span class="token punctuation">,</span>
							  Mould_temp<span class="token punctuation">,</span> Clamp_force<span class="token punctuation">,</span> Shot_Weight<span class="token punctuation">,</span>
							  Mould_SA<span class="token punctuation">,</span> Mould_vol<span class="token punctuation">,</span> Cavity_SA<span class="token punctuation">,</span> Cavity_vol<span class="token punctuation">,</span>
							  Melt_temp<span class="token punctuation">,</span> Mat_density<span class="token punctuation">,</span> Mat_GF<span class="token punctuation">,</span> Mat_MMFR<span class="token punctuation">]</span><span class="token punctuation">]</span>
                        pred <span class="token operator">=</span> trained_model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
                        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"param:"</span><span class="token punctuation">,</span> X<span class="token punctuation">,</span> <span class="token string">"\nPred:"</span><span class="token punctuation">,</span> pred<span class="token punctuation">,</span> <span class="token string">"\nweight:"</span><span class="token punctuation">,</span> weight_actual<span class="token punctuation">)</span>
                        <span class="token keyword">if</span> weight_actual <span class="token operator">&lt;=</span> pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> weight_actual <span class="token operator">*</span> <span class="token number">1.01</span><span class="token punctuation">:</span>
                            <span class="token keyword">if</span> first_pred<span class="token punctuation">:</span>
                                param <span class="token operator">=</span> X<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                                param<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pred<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                param<span class="token punctuation">.</span>append<span class="token punctuation">(</span>weight_actual<span class="token punctuation">)</span>
                                <span class="token keyword">break</span>
					 <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">continue</span>
				 <span class="token keyword">break</span> <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">continue</span>
			 <span class="token keyword">break</span> <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
		 <span class="token keyword">break</span> <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
	 <span class="token keyword">break</span> <span class="token keyword">return</span> param
</code></pre>
<p>This function takes the values from the variables in the parameter list, then it starts to iterate through all the possible combination of the individual parameters bounded by the upper and lower (minimum and maximum) values that were also passed in as a parameter. The function then passes each iteration through the ANN and verifies if the predicted weight is greater than the value we would get from mould volume x raw material density. If it verifies true then that combination is returned as the optimal set of machine parameters.</p>
<hr>
<h3 id="python-script-models-.py">PYTHON SCRIPT: Models .py</h3>
<p>This python script defines all the tables that are stored in the SQLAlchemy database. Detailed documentation about the SQLAlchemy functions used in this script can be found <a href="https://docs.sqlalchemy.org/">here</a>.</p>
<h4 id="def-initdb">def initDb()</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">def</span> <span class="token function">initDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token operator">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token string">'predictor/data.db'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        db<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span><span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This function ensures that the data.db file exists and is already configured.</p>
<h4 id="class-moulddb.model">class Mould(db.Model)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">Mould</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    fill_time <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    injection_pres <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    holding_pres <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    holding_time <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    cooling_time <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    mould_temp <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    clamp_force <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    shot_weight <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    mould_SA <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    mould_vol <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    cavity_SA <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    cavity_vol <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    melt_temp <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    mat_density <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    mat_GF <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    mat_MMFR <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    part_weight <span class="token operator">=</span> dbf<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">delete_self</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>delete<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">add_self</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the table that stores the entire database on which the ANN is trained. The following methods are also present in this class.</p>
<dl>
<dt>def delete_self(self)</dt>
<dd>This deletes the specific entry that the object of this class is referring to, from the database.</dd>
<dt>def add_self(self)</dt>
<dd>This function adds the new entry saved in the object of this class into the database.</dd>
</dl>
<h4 id="class-dbmodelmetricsdb.model">class DBModelMetrics(db.Model)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">DBModelMetrics</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    absolute_mean_error <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    model_score <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    max_error <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Float<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        DBModelMetrics<span class="token punctuation">.</span>query<span class="token punctuation">.</span>filter_by<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This class defines the table that stores the model’s performance metrics. The following method is also present in this class.</p>
<dl>
<dt>def save(self)</dt>
<dd>This deletes the presently stored metric and saves the new metrics save in the object in the database.</dd>
</dl>
<h4 id="class-userdb.model">class User(db.Model)</h4>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>db<span class="token punctuation">.</span>Model<span class="token punctuation">,</span> UserMixin<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>Integer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    username <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>String<span class="token punctuation">(</span>length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    email_address <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>String<span class="token punctuation">(</span>length<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> unique<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    password_hash <span class="token operator">=</span> db<span class="token punctuation">.</span>Column<span class="token punctuation">(</span>db<span class="token punctuation">.</span>String<span class="token punctuation">(</span>length<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nullable<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

	@<span class="token builtin">property</span>
	<span class="token keyword">def</span> <span class="token function">password</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
	    <span class="token keyword">return</span> self<span class="token punctuation">.</span>password

	@password<span class="token punctuation">.</span>setter
	<span class="token keyword">def</span> <span class="token function">password</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> plain_text_password<span class="token punctuation">)</span><span class="token punctuation">:</span>
	    self<span class="token punctuation">.</span>password_hash <span class="token operator">=</span> bcrypt<span class="token punctuation">.</span>generate_password_hash<span class="token punctuation">(</span>plain_text_password<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">check_password_correction</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> attempted_password<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> bcrypt<span class="token punctuation">.</span>check_password_hash<span class="token punctuation">(</span>self<span class="token punctuation">.</span>password_hash<span class="token punctuation">,</span> attempted_password<span class="token punctuation">)</span>
</code></pre>
<p>This class defines the user table stored in the database and the is used by flask login manager to authenticate the session.</p>
<hr>
<h3 id="python-script-routes-.py">PYTHON SCRIPT: Routes .py</h3>
<p>This script handles the app routing for the Flask App. App routing is used to map the specific URL with the associated function that is intended to perform some task. It is used to access some particular page like the predict page or the database page.</p>
<h4 id="def-home_page">def home_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">home_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'home.html'</span><span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering the home page of the app.</p>
<h4 id="def-main_page">def main_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/main-page'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">main_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'main.html'</span><span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering the main landing page of the app.</p>
<h4 id="def-predict_page">def predict_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/predict-page'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">predict_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    predict_form <span class="token operator">=</span> PredictForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    output <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>shape<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> predict_form<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            output <span class="token operator">=</span> ml<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>
				                  Fill_time_min<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Fill_time_min<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Fill_time_max<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Fill_time_max<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Fill_time_res<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Fill_time_res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Injection_pres_min<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Injection_pres_min<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Injection_pres_max<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Injection_pres_max<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Injection_pres_res<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Injection_pres_res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Holding_pres_min<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Holding_pres_min<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Holding_pres_max<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Holding_pres_max<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Holding_pres_res<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Holding_pres_res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Holding_time_min<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Holding_time_min<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Holding_time_max<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Holding_time_max<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Holding_time_res<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Holding_time_res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Cooling_time_min<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Cooling_time_min<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Cooling_time_max<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Cooling_time_max<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Cooling_time_res<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Cooling_time_res<span class="token punctuation">.</span>data<span class="token punctuation">,</span>

								  Mould_temp<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Mould_temp<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Clamp_force<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Clamp_force<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Shot_Weight<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Shot_Weight<span class="token punctuation">.</span>data<span class="token punctuation">,</span>

								  Mould_SA<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Mould_SA<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Mould_vol<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Mould_vol<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Cavity_SA<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Cavity_SA<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Cavity_vol<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Cavity_vol<span class="token punctuation">.</span>data<span class="token punctuation">,</span>

								  Melt_temp<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Melt_temp<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Mat_density<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Mat_density<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Mat_GF<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Mat_GF<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
								  Mat_MMFR<span class="token operator">=</span>predict_form<span class="token punctuation">.</span>Mat_MMFR<span class="token punctuation">.</span>data
            <span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Results: '</span><span class="token punctuation">,</span> output<span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token operator">not</span> output<span class="token punctuation">:</span>
                output <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span>
                flash<span class="token punctuation">(</span><span class="token string">'No optimal machine parameters were found for the given constraints'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'predict.html'</span><span class="token punctuation">,</span> form<span class="token operator">=</span>predict_form<span class="token punctuation">,</span> output<span class="token operator">=</span>output<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                flash<span class="token punctuation">(</span><span class="token string">'Successfully found optimal parameters'</span><span class="token punctuation">,</span> <span class="token string">'Success'</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'predict.html'</span><span class="token punctuation">,</span> form<span class="token operator">=</span>predict_form<span class="token punctuation">,</span> output<span class="token operator">=</span>output<span class="token punctuation">)</span>
        <span class="token keyword">if</span> predict_form<span class="token punctuation">.</span>errors <span class="token operator">!=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
            flash<span class="token punctuation">(</span><span class="token string">'Invalid values in Predict Form'</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'error'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'predict_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'predict.html'</span><span class="token punctuation">,</span> form<span class="token operator">=</span>predict_form<span class="token punctuation">,</span> output<span class="token operator">=</span>output<span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering and implementing the logic behind the predict page of the app. This function accepts the values entered in the predict form (POST method) and then passes it to predict() function from machine_learning.py script and then shows the output of the function by re-rendering the predict page and passing the predicted values to it.</p>
<h4 id="def-model_page">def model_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/model-page'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">model_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ml<span class="token punctuation">.</span>init_load_up<span class="token punctuation">(</span><span class="token punctuation">)</span>
    retrainmodel <span class="token operator">=</span> RetrainModel<span class="token punctuation">(</span><span class="token punctuation">)</span>
    hypertunemodel <span class="token operator">=</span> HyperTuneModel<span class="token punctuation">(</span><span class="token punctuation">)</span>
    absMeanError <span class="token operator">=</span> ml<span class="token punctuation">.</span>ml_metrics<span class="token punctuation">.</span>absolute_mean_error
    modelScore <span class="token operator">=</span> ml<span class="token punctuation">.</span>ml_metrics<span class="token punctuation">.</span>modelScore
    maxError <span class="token operator">=</span> ml<span class="token punctuation">.</span>ml_metrics<span class="token punctuation">.</span>max_error
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>
        retrain <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Retrain-model'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> retrain<span class="token punctuation">:</span>
            ml<span class="token punctuation">.</span>retrain<span class="token punctuation">(</span><span class="token punctuation">)</span>
            flash<span class="token punctuation">(</span><span class="token string">'Model Retrained Successfully'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'model.html'</span><span class="token punctuation">,</span>
								  absMeanError<span class="token operator">=</span>absMeanError<span class="token punctuation">,</span>
								  modelScore<span class="token operator">=</span>modelScore<span class="token punctuation">,</span>
								  maxError<span class="token operator">=</span>maxError<span class="token punctuation">,</span>
								  RetrainModel<span class="token operator">=</span>retrainmodel<span class="token punctuation">,</span>
								  HyperTuneModel<span class="token operator">=</span>hypertunemodel<span class="token punctuation">)</span>
        retrain <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HyperTune-model'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> retrain<span class="token punctuation">:</span>
            flash<span class="token punctuation">(</span><span class="token string">'Model HyperTuned Successfully'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
            flash<span class="token punctuation">(</span><span class="token string">'If the model\'s performance has decreased then you need to run the HyperTune utility again'</span><span class="token punctuation">,</span> <span class="token string">'info'</span><span class="token punctuation">)</span>
            ml<span class="token punctuation">.</span>hyperTune<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'model.html'</span><span class="token punctuation">,</span>
								  absMeanError<span class="token operator">=</span>absMeanError<span class="token punctuation">,</span>
								  modelScore<span class="token operator">=</span>modelScore<span class="token punctuation">,</span>
								  maxError<span class="token operator">=</span>maxError<span class="token punctuation">,</span>
								  RetrainModel<span class="token operator">=</span>retrainmodel<span class="token punctuation">,</span>
								  HyperTuneModel<span class="token operator">=</span>hypertunemodel<span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'GET'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'model.html'</span><span class="token punctuation">,</span>
							  absMeanError<span class="token operator">=</span>absMeanError<span class="token punctuation">,</span>
							  modelScore<span class="token operator">=</span>modelScore<span class="token punctuation">,</span>
							  maxError<span class="token operator">=</span>maxError<span class="token punctuation">,</span>
							  RetrainModel<span class="token operator">=</span>retrainmodel<span class="token punctuation">,</span>
							  HyperTuneModel<span class="token operator">=</span>hypertunemodel<span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering and implementing the logic behind the model page of the app.</p>
<h4 id="def-database_page">def database_page()</h4>
<pre class=" language-python"><code class="prism  language-python">
@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/database-page'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">database_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    addentryform <span class="token operator">=</span> AddEntryForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    addentrycsv <span class="token operator">=</span> AddEntryCSV<span class="token punctuation">(</span><span class="token punctuation">)</span>
    deleteentryform <span class="token operator">=</span> DeleteEntryForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    deleteallentries <span class="token operator">=</span> DeleteAllEntries<span class="token punctuation">(</span><span class="token punctuation">)</span>
    exportallentries <span class="token operator">=</span> ExportAllEntries<span class="token punctuation">(</span><span class="token punctuation">)</span>
    getCSVFormat <span class="token operator">=</span> GetCSVFormatForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"POST"</span><span class="token punctuation">:</span>
        <span class="token comment"># add entry logic  </span>
	  <span class="token keyword">if</span> addentryform<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			  entry_to_create <span class="token operator">=</span> Mould<span class="token punctuation">(</span>
	              fill_time<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Fill_time<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  injection_pres<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Injection_pres<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  holding_pres<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Holding_pres<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  holding_time<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Holding_time<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  cooling_time<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Cooling_time<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  mould_temp<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Mould_temp<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  clamp_force<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Clamp_force<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  shot_weight<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Shot_Weight<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  mould_SA<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Mould_SA<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  mould_vol<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Mould_vol<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  cavity_SA<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Cavity_SA<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  cavity_vol<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Cavity_vol<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  melt_temp<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Melt_temp<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  mat_density<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Mat_density<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  mat_GF<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Mat_GF<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  mat_MMFR<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Mat_MMFR<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
				  part_weight<span class="token operator">=</span>addentryform<span class="token punctuation">.</span>Part_weight<span class="token punctuation">.</span>data
	            <span class="token punctuation">)</span>
            entry_to_create<span class="token punctuation">.</span>add_self<span class="token punctuation">(</span><span class="token punctuation">)</span>
            flash<span class="token punctuation">(</span><span class="token string">'Entry added successfully'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># add entry logic with csv  </span>
	  <span class="token keyword">if</span> addentrycsv<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		   filename <span class="token operator">=</span> secure_filename<span class="token punctuation">(</span>addentrycsv<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>filename<span class="token punctuation">)</span>
		   addentrycsv<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>save<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'UPLOADS'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>
		   add_from_csv<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'UPLOADS'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span>
		   flash<span class="token punctuation">(</span><span class="token string">'CSV dataset added successfully'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
		   <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> getCSVFormat<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">and</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Get-CSV'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            getCSV <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Get-CSV'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> state<span class="token punctuation">.</span>queryServerState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sending format'</span><span class="token punctuation">)</span>
                results <span class="token operator">=</span> serverExportCSVFormat<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> results
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> getCSV<span class="token punctuation">:</span>
                    <span class="token keyword">if</span> exportCSVFormat<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        flash<span class="token punctuation">(</span><span class="token string">'format.csv placed on your desktop'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
                        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        flash<span class="token punctuation">(</span><span class="token string">'Error in placing format.csv on your desktop as a file with the same name exists on your desktop'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
                        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


        <span class="token comment"># delete entry logic  </span>
	  <span class="token keyword">if</span> deleteentryform<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            deleted_entry <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'deleted_entry'</span><span class="token punctuation">)</span>
            d_entry_object <span class="token operator">=</span> Mould<span class="token punctuation">.</span>query<span class="token punctuation">.</span>filter_by<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span>deleted_entry<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> d_entry_object<span class="token punctuation">:</span>
                d_entry_object<span class="token punctuation">.</span>delete_self<span class="token punctuation">(</span><span class="token punctuation">)</span>
                flash<span class="token punctuation">(</span><span class="token string">'Entry deleted successfully'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> exportallentries<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">and</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Export-DB'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            export_db <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Export-DB'</span><span class="token punctuation">)</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'sending database'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> export_db<span class="token punctuation">:</span>
                <span class="token keyword">if</span> state<span class="token punctuation">.</span>queryServerState<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    <span class="token keyword">return</span> serverExportCSV<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> exportCSV<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        flash<span class="token punctuation">(</span><span class="token string">'Dataset exported to database.csv on your desktop'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
                        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        flash<span class="token punctuation">(</span><span class="token string">'Dataset could not be exported as Database.csv file already exists on your desktop'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
                        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

       <span class="token keyword">if</span> deleteallentries<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            purge_db <span class="token operator">=</span> request<span class="token punctuation">.</span>form<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'Purge-DB'</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> purge_db<span class="token punctuation">:</span>
                purge<span class="token punctuation">(</span><span class="token punctuation">)</span>
                flash<span class="token punctuation">(</span><span class="token string">'Dataset erased successfully'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> addentrycsv<span class="token punctuation">.</span><span class="token builtin">file</span><span class="token punctuation">.</span>data <span class="token operator">and</span> addentrycsv<span class="token punctuation">.</span>errors <span class="token operator">!=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
		  <span class="token keyword">for</span> err_msg <span class="token keyword">in</span> addentrycsv<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		                flash<span class="token punctuation">(</span>err_msg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'error'</span><span class="token punctuation">)</span>
		            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> addentryform<span class="token punctuation">.</span>Fill_time<span class="token punctuation">.</span>raw_data <span class="token operator">and</span> addentryform<span class="token punctuation">.</span>errors <span class="token operator">!=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
		  flash<span class="token punctuation">(</span><span class="token string">'Invalid Values in New Entry Form'</span><span class="token punctuation">,</span> <span class="token string">'error'</span><span class="token punctuation">)</span>
		            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'database_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">"GET"</span><span class="token punctuation">:</span>
        entries <span class="token operator">=</span> Mould<span class="token punctuation">.</span>query<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> render_template<span class="token punctuation">(</span>
			  <span class="token string">'database.html'</span><span class="token punctuation">,</span>
			  AddEntryForm<span class="token operator">=</span>addentryform<span class="token punctuation">,</span>
			  DeleteEntryForm<span class="token operator">=</span>deleteentryform<span class="token punctuation">,</span>
			  AddEntryCSV<span class="token operator">=</span>addentrycsv<span class="token punctuation">,</span>
			  GetCSVFormatForm<span class="token operator">=</span>getCSVFormat<span class="token punctuation">,</span>
			  DeleteAllEntries<span class="token operator">=</span>deleteallentries<span class="token punctuation">,</span>
			  ExportAllEntries<span class="token operator">=</span>exportallentries<span class="token punctuation">,</span>
			  entries<span class="token operator">=</span>entries<span class="token punctuation">,</span>
			  getPredict<span class="token operator">=</span>ml<span class="token punctuation">.</span>getPredict
        <span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering and implementing the logic behind the database page of the app.</p>
<h4 id="def-help_page">def help_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/help-page'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">help_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'help.html'</span><span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering the main landing page of the app.</p>
<h4 id="def-register_page">def register_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/register'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">register_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    form <span class="token operator">=</span> RegisterForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> form<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        user_to_create <span class="token operator">=</span> User<span class="token punctuation">(</span>username<span class="token operator">=</span>form<span class="token punctuation">.</span>username<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
							  email_address<span class="token operator">=</span>form<span class="token punctuation">.</span>email_address<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
							  password<span class="token operator">=</span>form<span class="token punctuation">.</span>password1<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>add<span class="token punctuation">(</span>user_to_create<span class="token punctuation">)</span>
        db<span class="token punctuation">.</span>session<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
        login_user<span class="token punctuation">(</span>user_to_create<span class="token punctuation">)</span>
        flash<span class="token punctuation">(</span>f<span class="token string">"Account created successfully! You are now logged in as {user_to_create.username}"</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'success'</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'main_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> form<span class="token punctuation">.</span>errors <span class="token operator">!=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> err_msg <span class="token keyword">in</span> form<span class="token punctuation">.</span>errors<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            flash<span class="token punctuation">(</span>f<span class="token string">'There was an error with creating a user: {err_msg}'</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'danger'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'register.html'</span><span class="token punctuation">,</span> form<span class="token operator">=</span>form<span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering the user registeration page.</p>
<h4 id="section"></h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">login_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    form <span class="token operator">=</span> LoginForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> form<span class="token punctuation">.</span>validate_on_submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        attempted_user <span class="token operator">=</span> User<span class="token punctuation">.</span>query<span class="token punctuation">.</span>filter_by<span class="token punctuation">(</span>username<span class="token operator">=</span>form<span class="token punctuation">.</span>username<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> attempted_user <span class="token operator">and</span> attempted_user<span class="token punctuation">.</span>check_password_correction<span class="token punctuation">(</span>
                attempted_password<span class="token operator">=</span>form<span class="token punctuation">.</span>password<span class="token punctuation">.</span>data
        <span class="token punctuation">)</span><span class="token punctuation">:</span>
            login_user<span class="token punctuation">(</span>attempted_user<span class="token punctuation">)</span>
            flash<span class="token punctuation">(</span>f<span class="token string">'Success! You are logged in as: {attempted_user.username}'</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'success'</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">'market_page'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            flash<span class="token punctuation">(</span><span class="token string">'Username and password are not match! Please try again'</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'danger'</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> render_template<span class="token punctuation">(</span><span class="token string">'login.html'</span><span class="token punctuation">,</span> form<span class="token operator">=</span>form<span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for rendering the login in page.</p>
<h4 id="def-logout_page">def logout_page()</h4>
<pre class=" language-python"><code class="prism  language-python">@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">'/logout'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">logout_page</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    logout_user<span class="token punctuation">(</span><span class="token punctuation">)</span>
    flash<span class="token punctuation">(</span><span class="token string">"You have been logged out!"</span><span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token string">'info'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>url_for<span class="token punctuation">(</span><span class="token string">"home_page"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>This function is responsible for logging out the user.</p>
<hr>
<h3 id="python-script--ui-.py">PYTHON SCRIPT : UI .py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PyQt5 <span class="token keyword">import</span> QtCore<span class="token punctuation">,</span> QtWidgets<span class="token punctuation">,</span> QtGui<span class="token punctuation">,</span> QtWebEngineWidgets
<span class="token keyword">import</span> socket
<span class="token keyword">import</span> ctypes
<span class="token keyword">from</span> sys <span class="token keyword">import</span> platform


<span class="token keyword">class</span> <span class="token class-name">ApplicationThread</span><span class="token punctuation">(</span>QtCore<span class="token punctuation">.</span>QThread<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> application<span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>ApplicationThread<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>application <span class="token operator">=</span> application
        self<span class="token punctuation">.</span>port <span class="token operator">=</span> port

    <span class="token keyword">def</span> <span class="token function">__del__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>application<span class="token punctuation">.</span>run<span class="token punctuation">(</span>port<span class="token operator">=</span>self<span class="token punctuation">.</span>port<span class="token punctuation">,</span> threaded<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>


<span class="token keyword">class</span> <span class="token class-name">WebPage</span><span class="token punctuation">(</span>QtWebEngineWidgets<span class="token punctuation">.</span>QWebEnginePage<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> root_url<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>WebPage<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>root_url <span class="token operator">=</span> root_url

    <span class="token keyword">def</span> <span class="token function">home</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QtCore<span class="token punctuation">.</span>QUrl<span class="token punctuation">(</span>self<span class="token punctuation">.</span>root_url<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">acceptNavigationRequest</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">,</span> kind<span class="token punctuation">,</span> is_main_frame<span class="token punctuation">)</span><span class="token punctuation">:</span>
        ready_url <span class="token operator">=</span> url<span class="token punctuation">.</span>toEncoded<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>data<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span>
        is_clicked <span class="token operator">=</span> kind <span class="token operator">==</span> self<span class="token punctuation">.</span>NavigationTypeLinkClicked
        <span class="token keyword">if</span> is_clicked <span class="token operator">and</span> self<span class="token punctuation">.</span>root_url <span class="token operator">not</span> <span class="token keyword">in</span> ready_url<span class="token punctuation">:</span>
            QtGui<span class="token punctuation">.</span>QDesktopServices<span class="token punctuation">.</span>openUrl<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
	<span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span>WebPage<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>acceptNavigationRequest<span class="token punctuation">(</span>url<span class="token punctuation">,</span> kind<span class="token punctuation">,</span> is_main_frame<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">init_gui</span><span class="token punctuation">(</span>application<span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">800</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">,</span>
  window_title<span class="token operator">=</span><span class="token string">"title"</span><span class="token punctuation">,</span> icon<span class="token operator">=</span><span class="token string">"icon1.ico"</span><span class="token punctuation">,</span> argv<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    myAppID <span class="token operator">=</span> <span class="token string">'JoelKundu.Predictor'</span>
	<span class="token keyword">if</span> platform <span class="token operator">==</span> <span class="token string">"win32"</span><span class="token punctuation">:</span>
	   ctypes<span class="token punctuation">.</span>windll<span class="token punctuation">.</span>shell32<span class="token punctuation">.</span>SetCurrentProcessExplicitAppUserModelID<span class="token punctuation">(</span>myAppID<span class="token punctuation">)</span>

    <span class="token keyword">if</span> argv <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        argv <span class="token operator">=</span> sys<span class="token punctuation">.</span>argv

    <span class="token keyword">if</span> port <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        sock <span class="token operator">=</span> socket<span class="token punctuation">.</span>socket<span class="token punctuation">(</span>socket<span class="token punctuation">.</span>AF_INET<span class="token punctuation">,</span> socket<span class="token punctuation">.</span>SOCK_STREAM<span class="token punctuation">)</span>
        sock<span class="token punctuation">.</span>bind<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        port <span class="token operator">=</span> sock<span class="token punctuation">.</span>getsockname<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        sock<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

    qtapp <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QApplication<span class="token punctuation">(</span>argv<span class="token punctuation">)</span>
    webapp <span class="token operator">=</span> ApplicationThread<span class="token punctuation">(</span>application<span class="token punctuation">,</span> port<span class="token punctuation">)</span>
    webapp<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
    qtapp<span class="token punctuation">.</span>aboutToQuit<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>webapp<span class="token punctuation">.</span>terminate<span class="token punctuation">)</span>

    window <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QMainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span>window_title<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>setWindowIcon<span class="token punctuation">(</span>QtGui<span class="token punctuation">.</span>QIcon<span class="token punctuation">(</span>icon<span class="token punctuation">)</span><span class="token punctuation">)</span>

    webView <span class="token operator">=</span> QtWebEngineWidgets<span class="token punctuation">.</span>QWebEngineView<span class="token punctuation">(</span>window<span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>setCentralWidget<span class="token punctuation">(</span>webView<span class="token punctuation">)</span>

    page <span class="token operator">=</span> WebPage<span class="token punctuation">(</span><span class="token string">'http://localhost:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span>
    page<span class="token punctuation">.</span>home<span class="token punctuation">(</span><span class="token punctuation">)</span>
    webView<span class="token punctuation">.</span>setPage<span class="token punctuation">(</span>page<span class="token punctuation">)</span>

    window<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> qtapp<span class="token punctuation">.</span>exec_<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This file is a local copy of the PyFlaDesk module and more information about this file can be found <a href="https://github.com/smoqadam/PyFladesk">here</a>.</p>
<hr>
<h3 id="python-script-__init__.py">PYTHON SCRIPT: __init__.py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">from</span> flask_sqlalchemy <span class="token keyword">import</span> SQLAlchemy
<span class="token keyword">import</span> os
<span class="token keyword">import</span> json


<span class="token keyword">class</span> <span class="token class-name">AppState</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    _serverState <span class="token operator">=</span> <span class="token boolean">False</span>

 <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_serverState <span class="token operator">=</span> <span class="token boolean">False</span>

 <span class="token keyword">def</span> <span class="token function">serverModeOn</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_serverState <span class="token operator">=</span> <span class="token boolean">True</span>

 <span class="token keyword">def</span> <span class="token function">serverModeOff</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_serverState <span class="token operator">=</span> <span class="token boolean">False</span>

 <span class="token keyword">def</span> <span class="token function">queryServerState</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_serverState<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">True</span>
 <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>


state <span class="token operator">=</span> AppState<span class="token punctuation">(</span><span class="token punctuation">)</span>
modulePath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
csvPath <span class="token operator">=</span> <span class="token string">'static/client/csv/'</span>
uploadPath <span class="token operator">=</span> <span class="token string">'uploads/'</span>
clientUploadPath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>normpath<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>modulePath<span class="token punctuation">,</span> uploadPath<span class="token punctuation">)</span><span class="token punctuation">)</span>
clientCSVPath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>normpath<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>modulePath<span class="token punctuation">,</span> csvPath<span class="token punctuation">)</span><span class="token punctuation">)</span>


app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span>
configPath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>app<span class="token punctuation">.</span>root_path<span class="token punctuation">,</span> <span class="token string">'config.json'</span><span class="token punctuation">)</span>
config <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>configPath<span class="token punctuation">)</span>
data <span class="token operator">=</span> json<span class="token punctuation">.</span>load<span class="token punctuation">(</span>config<span class="token punctuation">)</span>
<span class="token keyword">if</span> data<span class="token punctuation">[</span><span class="token string">"ServerMode"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"True"</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">" * Running in SERVER MODE"</span><span class="token punctuation">)</span>
    state<span class="token punctuation">.</span>serverModeOn<span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SEND_FILE_MAX_AGE_DEFAULT'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SQLALCHEMY_DATABASE_URI'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'sqlite:///data.db'</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SECRET_KEY'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'9a257ea9a3b0b646c25ec6f8'</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'SQLALCHEMY_TRACK_MODIFICATIONS'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'CLIENT_CSV'</span><span class="token punctuation">]</span> <span class="token operator">=</span> clientCSVPath
app<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">'UPLOADS'</span><span class="token punctuation">]</span> <span class="token operator">=</span> clientUploadPath
db <span class="token operator">=</span> SQLAlchemy<span class="token punctuation">(</span>app<span class="token punctuation">)</span>


@app<span class="token punctuation">.</span>after_request
<span class="token keyword">def</span> <span class="token function">add_header</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># response.cache_control.no_store = True  </span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Cache-Control'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'no-store, no-cache, must-revalidate, post-check=0, pre-check=0, max-age=0'</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Pragma'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'no-cache'</span>
  response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'Expires'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'-1'</span>
  <span class="token keyword">return</span> response


<span class="token keyword">from</span> predictor <span class="token keyword">import</span> routes
</code></pre>
<p>This script is responsible for initializing and configuring the Flask app and detailed documentation about the functions used in the scripts can be found in <a href="https://flask.palletsprojects.com/en/1.1.x/">FLASK Documentation</a></p>
<hr>
<h3 id="python-script-run-.py">PYTHON SCRIPT: Run .py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">from</span> predictor <span class="token keyword">import</span> app
<span class="token keyword">from</span> pyfladesk <span class="token keyword">import</span> init_gui


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    init_gui<span class="token punctuation">(</span>app<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">1600</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">900</span><span class="token punctuation">,</span> window_title<span class="token operator">=</span><span class="token string">"Moulding Machine Parameter Predictor"</span><span class="token punctuation">,</span> icon<span class="token operator">=</span><span class="token string">'predictor/static/resources/icon.ico'</span><span class="token punctuation">)</span>
</code></pre>
<p>This script is responsible for launching the desktop app. It uses pyfladesk to create a barebones browser window in which the web app is rendered.</p>
<hr>
<h3 id="python-script-run-server-.py">PYTHON SCRIPT: Run-Server .py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">from</span> predictor <span class="token keyword">import</span> app<span class="token punctuation">,</span> state

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    state<span class="token punctuation">.</span>serverModeOn<span class="token punctuation">(</span><span class="token punctuation">)</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre>
<p>This script is responsible for launching the server that will host the web app version of the utility.</p>
<hr>
<h3 id="python-script-man-recreatedb-.py">PYTHON SCRIPT: Man-ReCreateDB .py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">import</span> os
<span class="token keyword">from</span> predictor <span class="token keyword">import</span> db

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">'predictor/data.db'</span><span class="token punctuation">)</span>
    db<span class="token punctuation">.</span>create_all<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This script is provided in case there are issues with data.db file. This script will recreate data.db file however all data stored in the database will be lost.</p>
<hr>
<h3 id="python-script-man-overfit-test-.py">PYTHON SCRIPT: Man-Overfit-Test .py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">import</span> joblib <span class="token keyword">as</span> jl
<span class="token keyword">import</span> predictor<span class="token punctuation">.</span>database <span class="token keyword">as</span> database
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split

X<span class="token punctuation">,</span> y <span class="token operator">=</span> database<span class="token punctuation">.</span>get_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span>
X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.33</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

trained_model <span class="token operator">=</span> jl<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Training Score:'</span><span class="token punctuation">,</span> trained_model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Testing Score:'</span><span class="token punctuation">,</span> trained_model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Full Score:'</span><span class="token punctuation">,</span> trained_model<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>This script was created to ensure that the model hasn’t been overtrained on the given data. In case the model has been overtrained the model score on the training data will be higher than the testing data. In an ideal case, the scores should be approximately equal to each other.</p>
<h3 id="python-script-man-hypertune-.py">PYTHON SCRIPT: Man-HyperTune .py</h3>
<pre class=" language-python"><code class="prism  language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>neural_network <span class="token keyword">import</span> MLPRegressor
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> GridSearchCV
<span class="token keyword">import</span> predictor<span class="token punctuation">.</span>machine_learning <span class="token keyword">as</span> ml
<span class="token keyword">import</span> predictor<span class="token punctuation">.</span>database <span class="token keyword">as</span> database
<span class="token keyword">import</span> joblib <span class="token keyword">as</span> jl

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    parameter_space <span class="token operator">=</span> <span class="token punctuation">{</span>
		  <span class="token string">'hidden_layer_sizes'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'activation'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'tanh'</span><span class="token punctuation">,</span> <span class="token string">'relu'</span><span class="token punctuation">,</span> <span class="token string">'logistic'</span><span class="token punctuation">,</span> <span class="token string">'identity'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'solver'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'sgd'</span><span class="token punctuation">,</span> <span class="token string">'adam'</span><span class="token punctuation">,</span> <span class="token string">'lbfgs'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'alpha'</span><span class="token punctuation">:</span>  <span class="token punctuation">[</span><span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.0001</span><span class="token punctuation">,</span>
		  <span class="token number">0.002</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.0002</span><span class="token punctuation">,</span>
		  <span class="token number">0.003</span><span class="token punctuation">,</span> <span class="token number">0.03</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.0003</span><span class="token punctuation">,</span>
		  <span class="token number">0.004</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.0004</span><span class="token punctuation">,</span>
		  <span class="token number">0.005</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0005</span><span class="token punctuation">,</span>
		  <span class="token number">0.006</span><span class="token punctuation">,</span> <span class="token number">0.06</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.0006</span><span class="token punctuation">,</span>
		  <span class="token number">0.007</span><span class="token punctuation">,</span> <span class="token number">0.07</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">0.0007</span><span class="token punctuation">,</span>
		  <span class="token number">0.008</span><span class="token punctuation">,</span> <span class="token number">0.08</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.0008</span><span class="token punctuation">,</span>
		  <span class="token number">0.009</span><span class="token punctuation">,</span> <span class="token number">0.09</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">0.0009</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'learning_rate'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'constant'</span><span class="token punctuation">,</span> <span class="token string">'adaptive'</span><span class="token punctuation">,</span> <span class="token string">'invscaling'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'learning_rate_init'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.0001</span><span class="token punctuation">,</span>
		  <span class="token number">0.002</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.0002</span><span class="token punctuation">,</span>
		  <span class="token number">0.003</span><span class="token punctuation">,</span> <span class="token number">0.03</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.0003</span><span class="token punctuation">,</span>
		  <span class="token number">0.004</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.0004</span><span class="token punctuation">,</span>
		  <span class="token number">0.005</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.0005</span><span class="token punctuation">,</span>
		  <span class="token number">0.006</span><span class="token punctuation">,</span> <span class="token number">0.06</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.0006</span><span class="token punctuation">,</span>
		  <span class="token number">0.007</span><span class="token punctuation">,</span> <span class="token number">0.07</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">0.0007</span><span class="token punctuation">,</span>
		  <span class="token number">0.008</span><span class="token punctuation">,</span> <span class="token number">0.08</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.0008</span><span class="token punctuation">,</span>
		  <span class="token number">0.009</span><span class="token punctuation">,</span> <span class="token number">0.09</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">0.0009</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'random_state'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1399</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'warm_start'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'max_iter'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">75000</span><span class="token punctuation">,</span> <span class="token number">125000</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		  <span class="token string">'verbose'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    trained_model <span class="token operator">=</span> MLPRegressor<span class="token punctuation">(</span><span class="token punctuation">)</span>
    X<span class="token punctuation">,</span> y <span class="token operator">=</span> database<span class="token punctuation">.</span>get_datasets<span class="token punctuation">(</span><span class="token punctuation">)</span>
    X<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.33</span><span class="token punctuation">,</span> random_state<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    clf <span class="token operator">=</span> GridSearchCV<span class="token punctuation">(</span>trained_model<span class="token punctuation">,</span> parameter_space<span class="token punctuation">,</span> n_jobs<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> cv<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
    clf<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n\n\nBEST PARAMS'</span><span class="token punctuation">,</span> clf<span class="token punctuation">.</span>best_params_<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\n\n\nResults'</span><span class="token punctuation">,</span> clf<span class="token punctuation">.</span>cv_results_<span class="token punctuation">)</span>
    jl<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>clf<span class="token punctuation">,</span> <span class="token string">'predictor/static/ML/config.joblib'</span><span class="token punctuation">)</span>
    ml<span class="token punctuation">.</span>retrain<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>This script will automatically optimize and retrain the stored model on the dataset stored in the database without opening the app. This script uses GridSearchCV hence takes longer than the RandomizedSearchCV function used by the Auto-HyperTune function. However, this script will optimize the model the best performing configuration in a single execution.</p>
<hr>
<h3 id="batch-script-get-dependencies-.bat">BATCH SCRIPT Get-Dependencies .bat</h3>
<pre class=" language-batch"><code class="prism  language-batch"><span class="token command"><span class="token keyword">pip</span> install flask   </span>
<span class="token command"><span class="token keyword">pip</span> install flask-sqlalchemy  </span>
<span class="token command"><span class="token keyword">pip</span> install flask-wtf  </span>
<span class="token command"><span class="token keyword">pip</span> install wtforms  </span>
<span class="token command"><span class="token keyword">pip</span> install pyfladesk  </span>
<span class="token command"><span class="token keyword">pip</span> install sklearn  </span>
<span class="token command"><span class="token keyword">pip</span> install matplotlib  </span>
<span class="token command"><span class="token keyword">pip</span> install numpy  </span>
<span class="token command"><span class="token keyword">pip</span> install pandas   </span>
<span class="token command"><span class="token keyword">pip</span> install joblib</span>
<span class="token command"><span class="token keyword">pip</span> install flask-bcrypt</span>
<span class="token command"><span class="token keyword">pip</span> install flask_login</span>
<span class="token command"><span class="token keyword">pip</span> install email_validator</span>
</code></pre>
<p>This file is responsible for installing all the dependencies of the project using the pip installer that is provided with python. (for Windows)</p>
<h3 id="shell-script-get-dependencies-.sh">SHELL SCRIPT Get-Dependencies .sh</h3>
<pre class=" language-bash"><code class="prism  language-bash"><span class="token shebang important">#! /bin/sh</span>
pip <span class="token function">install</span> flask
pip <span class="token function">install</span> flask-sqlalchemy
pip <span class="token function">install</span> flask-wtf
pip <span class="token function">install</span> wtforms
pip <span class="token function">install</span> pyfladesk
pip <span class="token function">install</span> sklearn
pip <span class="token function">install</span> matplotlib
pip <span class="token function">install</span> numpy
pip <span class="token function">install</span> pandas
pip <span class="token function">install</span> joblib
pip <span class="token function">install</span> flask-bcrypt
pip <span class="token function">install</span> flask_login
pip <span class="token function">install</span> email_validator
</code></pre>
<p>This file is responsible for installing all the dependencies of the project using the pip installer that is provided with python. (for Linux)</p>
<h3 id="c-file-source.cpp">C++ FILE source.cpp</h3>
<pre class=" language-c"><code class="prism  language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span>  </span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"python run.py"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This file when build creates a binary that will use the terminal to run the command <code>python run.py</code>.</p>
<hr>
<h2 id="author-and-license">Author and License</h2>
<p>Copyright © 2021 Joel Kundu</p>
<p>This program is free software: you can redistribute it and/or modify<br>
it under the terms of the GNU General Public License as published by<br>
the Free Software Foundation, either version 3 of the License, or<br>
(at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful,<br>
but WITHOUT ANY WARRANTY; without even the implied warranty of<br>
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the<br>
GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program.  If not, see <a href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.</p>
<h2 id="contact">Contact</h2>
<p>The author can be contacted via the following emails:</p>
<ul>
<li><a href="mailto:f20171399@hyderabad.bits-pilani.ac.in">f20171399@hyderabad.bits-pilani.ac.in</a></li>
<li><a href="mailto:jdevcode02@gmail.com">jdevcode02@gmail.com</a></li>
</ul>


</div>
{% endblock %}